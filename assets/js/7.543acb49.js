(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{188:function(s,a,n){"use strict";n.r(a);var e=n(0),t=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"content"},[n("h2",{attrs:{id:"小程序·云开发特点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小程序·云开发特点","aria-hidden":"true"}},[s._v("#")]),s._v(" 小程序·云开发特点")]),s._v(" "),n("ul",[n("li",[s._v("提供完整后端服务解决方案，包括数据库、静态资源管理和云函数（功能服务）")]),s._v(" "),n("li",[s._v("背靠腾讯云大平台，腾讯云丰富的 API 和功能都可以简单调用")]),s._v(" "),n("li",[s._v("对于普通开发者，完全免费")]),s._v(" "),n("li",[s._v("对于高级服务型小程序，提供更强服务支持、计费弹性、不使用不计费的特点")]),s._v(" "),n("li",[s._v("无服务器搭建，无域名配置，直接调用 API 使用")])]),s._v(" "),n("h2",{attrs:{id:"申请小程序·云开发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#申请小程序·云开发","aria-hidden":"true"}},[s._v("#")]),s._v(" 申请小程序·云开发")]),s._v(" "),n("ol",[n("li",[s._v("点击「云开发」，该界面主要是云开发的介绍和申请入口。")]),s._v(" "),n("li",[s._v("点击蓝色的「创建资源环境」按钮进入新建环境界面")]),s._v(" "),n("li",[s._v("第二步出现选择套餐信息，现在公测阶段只有一个免费套餐选项，将来应该会有更多套餐选择。填写上「环境名称」点击确认之后，会使用小程序开发账号在腾讯云开通一个 fake account。到此小程序·云开发就开通了！")])]),s._v(" "),n("blockquote",[n("p",[s._v("目前一个小程序账号可以免费开通两个云开发账号，免费版本的限制应该也要注意：")])]),s._v(" "),n("ul",[n("li",[s._v("数据库存储空间：1GB")]),s._v(" "),n("li",[s._v("文件存储空间：5GB")]),s._v(" "),n("li",[s._v("文件存储外网下行流量：5GB/月")]),s._v(" "),n("li",[s._v("云函数数量：20")]),s._v(" "),n("li",[s._v("云函数资源使用量：10万GBs/月")]),s._v(" "),n("li",[s._v("API调用次数：3万次/天")])]),s._v(" "),n("h3",{attrs:{id:"小程序·云开发在小程序中的调用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小程序·云开发在小程序中的调用","aria-hidden":"true"}},[s._v("#")]),s._v(" 小程序·云开发在小程序中的调用")]),s._v(" "),n("p",[s._v("小程序·云开发可以在小程序中直接通过调用 wx.cloud.* 的方式进行调用，在调用云开发 API 之前，需要先调用 wx.cloud.init 对云开发进行初始化：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("wx.cloud.init({\n  env: 'tianqi-xxx'\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("初始化时，需要传入 env 参数，该参数为创建小程序·云开发时的环境 ID，可以在「云开发」页面右上角「当前环境」下拉菜单中找到")]),s._v(" "),n("h2",{attrs:{id:"小程序·云开发的三大功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小程序·云开发的三大功能","aria-hidden":"true"}},[s._v("#")]),s._v(" 小程序·云开发的三大功能")]),s._v(" "),n("h3",{attrs:{id:"数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库","aria-hidden":"true"}},[s._v("#")]),s._v(" 数据库")]),s._v(" "),n("p",[s._v("小程序·云开发的数据库是一种 NoSQL 云端数据库，数据以 JSON 格式存储，在底层支持弹性可扩展、自动容灾、监控管理，所以开发者不需要关注数据库的运维。从提供的文档和接口来看，云开发的数据库应该是由 MongoDB 实现的。")]),s._v(" "),n("p",[s._v("每个数据库是由多个集合（collection，类比关系型数据库中表的概念）组成，集合有多个 JSON 文档（行）组成，NoSQL 的特点是没有固定的字段，所以整个集合可以看成一个大的 JSON 数组，一个集合在数据库中的存储格式如下：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('[\n  {\n    "_id": 1,\n    "_openid": "ax123CVadb",\n    "name": "Alice",\n    "city": "Guangzhou"\n  },\n  {\n    "_id": 2,\n    "_openid": "xj372nJdfa",\n    "name": "Bob",\n    "city": "Shenzhen"\n  }\n]\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("需要说明的是，文档中的 _id 是唯一的，开发者可以插入数据的时候自定义，另外 _openid 是增加文档默认创建的，代表当前小程序用户的唯一标示")]),s._v(" "),n("h4",{attrs:{id:"快速入门"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#快速入门","aria-hidden":"true"}},[s._v("#")]),s._v(" 快速入门")]),s._v(" "),n("h5",{attrs:{id:"常用api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用api","aria-hidden":"true"}},[s._v("#")]),s._v(" 常用API")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 初始化\nwx.cloud.init({\n  env: 'tianqi-xxx'\n})\n\n// 获取数据库实例\nconst db = wx.cloud.database()\n\n// 增\ndb.collection('集合名称').add({\n  data: {} // 插入的数据\n}).then(res => {\n  // 可以通过 res._id 获取创建的记录的 id\n  console.log(res._id)\n})\n\n// 删\ndb.collection('集合名称').doc('文档 ID').remove().then(res => {\n  console.log('removed')\n})\n\n// 改\ndb.collection('集合名称').doc('文档 ID').update({\n  data: {\n    title: '我的第 1 篇文章', // 只更新 title 字段，其他不更新\n  }\n}).then(res => {\n  // 可以通过 res._id 获取创建的记录的 id\n  console.log(res._id)\n})\n\n// 查\ndb.collection('集合名称').doc('文档 ID').get().then(res => {\n  // 打印结果，res.data 即为记录的数据\n  console.log(res)\n})\nconst _ = db.command // 取指令\ndb.collection('集合名称').where({\n  // 查找条件\n  category: 'computer',\n  properties: {\n    memory: _.gt(8), // 表示大于 8\n  }\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br")])]),n("p",[s._v("小程序·云开发的数据库查询命令是可以使用查询筛选指令的，使用查询筛选指令可以缩小查询范围，找到查询条件的文档。")]),s._v(" "),n("p",[s._v("以下指令挂载在 db.command 下")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("类型")]),s._v(" "),n("th",[s._v("接口")]),s._v(" "),n("th",[s._v("说明")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("比较运算")]),s._v(" "),n("td",[s._v("eq")]),s._v(" "),n("td",[s._v("字段 ==")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("neq")]),s._v(" "),n("td",[s._v("字段 !=")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("gt")]),s._v(" "),n("td",[s._v("字段 >")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("gte")]),s._v(" "),n("td",[s._v("字段 >=")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("lt")]),s._v(" "),n("td",[s._v("字段 <")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("lte")]),s._v(" "),n("td",[s._v("字段 <=")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("in")]),s._v(" "),n("td",[s._v("字段值在数组里")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("nin")]),s._v(" "),n("td",[s._v("字段值不在数组里")])]),s._v(" "),n("tr",[n("td",[s._v("逻辑运算")]),s._v(" "),n("td",[s._v("and")]),s._v(" "),n("td",[s._v("表示需同时满足指定的所有条件")])]),s._v(" "),n("tr",[n("td"),s._v(" "),n("td",[s._v("or")]),s._v(" "),n("td",[s._v("表示需同时满足指定条件中的至少一个")])])])]),s._v(" "),n("blockquote",[n("p",[s._v("举例说明：在 diary 集合中找出 openid 某个值并且创建时间（tsModified）在 start 和 end 之间的文档。")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("db\n  .collection('diary')\n  .where({\n    openid,\n    tsModified: _.gte(start).and(_.lt(end))\n  })\n  .get()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"数据库的索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库的索引","aria-hidden":"true"}},[s._v("#")]),s._v(" 数据库的索引")]),s._v(" "),n("p",[s._v("增加合适的索引可以提升文档的查找效率，比如根据时间、用户 ID 查找，可以将时间和用户 ID 字段设置为索引项，"),n("strong",[s._v("在小程序·云开发管理后台并不能对某个字段增加唯一索引")]),s._v("。")]),s._v(" "),n("h4",{attrs:{id:"自带权限管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自带权限管理","aria-hidden":"true"}},[s._v("#")]),s._v(" 自带权限管理")]),s._v(" "),n("p",[s._v("集合的操作权限包括以下四种：")]),s._v(" "),n("ul",[n("li",[s._v("所有用户可读，仅创建者及管理员可写")]),s._v(" "),n("li",[s._v("仅创建者及管理员可读写")]),s._v(" "),n("li",[s._v("所有用户可读，仅管理员可写")]),s._v(" "),n("li",[s._v("仅管理员可读写")])]),s._v(" "),n("p",[s._v("可以在「云开发 -> 数据库 -> 选择某个集合 -> 权限设置」页面进行设置。")]),s._v(" "),n("h3",{attrs:{id:"文件存储"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#文件存储","aria-hidden":"true"}},[s._v("#")]),s._v(" 文件存储")]),s._v(" "),n("p",[s._v("小程序·云开发的文件存储功能是专为存储和提供用户生成的内容（如图片或视频）的开发者打造的。开发者可使用腾讯云的 SDK 来存储图片、音频、视频或其他由用户生成的内容。在小程序内，则可以通过云开发的 API 直接上传、下载和管理存储。")]),s._v(" "),n("p",[s._v("公共使用的静态资源，可以通过「云开发 -> 存储」界面直接上传和管理，上传之后，就可以在界面内找到资源的 CDN 地址。")]),s._v(" "),n("h4",{attrs:{id:"小程序内上传和管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小程序内上传和管理","aria-hidden":"true"}},[s._v("#")]),s._v(" 小程序内上传和管理")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 上传，上传后会返回资源的 ID\nwx.cloud.uploadFile\n// 下载\nwx.cloud.downloadFile\n// 根据资源 ID 获取资源访问地址\nwx.cloud.getTempFileURL\n// 根据资源 ID 列表删除某资源\nwx.cloud.removeFile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("跟数据库权限管理一样，如果需要用户自己上传的内容自己可以管理，那么需要设置存储的操作权限，在「云开发 -> 存储」下可以设置全局的存储操作权限。")]),s._v(" "),n("h3",{attrs:{id:"云函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#云函数","aria-hidden":"true"}},[s._v("#")]),s._v(" 云函数")]),s._v(" "),n("p",[s._v("云函数是腾讯云提供的一套函数计算解决方案，我们可以将每个功能 API 做成单个可执行的函数，然后放到腾讯云上去托管，每个云函数是相互独立可执行的。代码编写完成后放到云端，不执行不调用不收费，执行调用按照调用次数和 CPU 等计算资源的占用情况收费。有了云函数，开发者无须搭建和购买服务器，只需要将写好的云函数代码上传部署到腾讯云，即可以在小程序内通过 wx.cloud.callFunction 的方法进行调用。")]),s._v(" "),n("h4",{attrs:{id:"快速入门-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#快速入门-2","aria-hidden":"true"}},[s._v("#")]),s._v(" 快速入门")]),s._v(" "),n("h5",{attrs:{id:"创建云函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建云函数","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建云函数")]),s._v(" "),n("ol",[n("li",[s._v("直接在小程序开发者工具中进行操作，进入「云开发 -> 云函数 -> 添加」创建")]),s._v(" "),n("li",[s._v("直接在小程序开发者工具中上传，在上传之前需要配置小程序的 project.config.json，指明哪个路径为云函数目录")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('{\n  "cloudfunctionRoot": "./cloud-functions/"\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("配置完成后，在小程序开发者工具的编辑器中展开 cloud-functions 文件夹，选择对应的云函数文件夹，右键选择「上传并部署」即可")]),s._v(" "),n("h5",{attrs:{id:"写个简单云函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#写个简单云函数","aria-hidden":"true"}},[s._v("#")]),s._v(" 写个简单云函数")]),s._v(" "),n("p",[s._v("小程序·云开发的云函数是执行在 Node.js 8.9.0 版本下的，云函数必须在 index.js 有 main 方法为入口")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 命名为 test 的函数内容 index.js\nexports.main = async (event, context) => {\n  let {a, b} = event\n  return new Promise((resolve, reject) => {\n    resolve({result: parseInt(a) + parseInt(b)})\n  })\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("除了上面 Promise 的写法，还可以用回调的方式：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("// 命名为 test 的函数内容 index.js\n// 回调方式 callback\nexports.main = async (event, context, callback) => {\n  let {a, b} = event\n  callback(null, {result: parseInt(a) + parseInt(b)})\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("pre",[n("code",[s._v("云函数如果不存在 main 的方法，上传部署的时候会报错！\n云函数回调方式写法遵循「错误优先」原则（Error-First Callback）。\n")])]),s._v(" "),n("p",[s._v("云函数接受两个 JSON 格式的参数 event 和 context，两者分别代表：")]),s._v(" "),n("ul",[n("li",[s._v("event：平台将 event 入参传递给执行方法，通过此 event 入参对象，代码将与触发函数的事件（event）交互，event 可以获取 wx.cloud.callFunction 调用的参数 data")]),s._v(" "),n("li",[s._v("context：平台将 context 入参传递给执行方法，通过此 context 入参对象，代码将能了解到运行环境及当前请求的相关内容")])]),s._v(" "),n("blockquote",[n("p",[s._v("开发者可以在云函数内获取到每次调用的上下文（appId、openId 等），无需维护复杂的鉴权机制，即可获取天然可信任的用户登录态（openId），这俩值可以从event.userInfo中读取。")])]),s._v(" "),n("p",[s._v("上面 test 的函数上传到腾讯云之后，我们在小程序的 JS 代码中可以使用下面的方法进行调用：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("wx.cloud.callFunction({\n  name: 'test',\n  data: {\n    a: 1,\n    b: 2\n  }\n}).then(r=>{\n  // 因为 main 的方法实际是个 promisify 的返回，所以可以直接使用 then/catch\n  console.log(r)\n}).catch(e=>{\n  console.log(e)\n})\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h5",{attrs:{id:"云函数的依赖管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#云函数的依赖管理","aria-hidden":"true"}},[s._v("#")]),s._v(" 云函数的依赖管理")]),s._v(" "),n("p",[s._v("在云函数中，可以像正常的 Node.js 一样，使用 package.json 和 node_modules 来对依赖进行管理，在开发完代码之后，需要将 node_modules 文件夹一起上传到云端去。")]),s._v(" "),n("h5",{attrs:{id:"云函数的调试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#云函数的调试","aria-hidden":"true"}},[s._v("#")]),s._v(" 云函数的调试")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("线下：函数自己使用 Node 来测试")])]),s._v(" "),n("li",[n("p",[s._v("线上：使用开发者工具")]),s._v(" "),n("p",[s._v("在小程序开发者工具的云开发控制台内有测试的工具，进入路径为：「云开发 -> 云函数列表 -> 点击具体云函数 -> 右上角测试」")])]),s._v(" "),n("li",[n("p",[s._v("云函数的 mock server")]),s._v(" "),n("ul",[n("li",[s._v("将云函数作为一个接受请求参数的 server 来访问")]),s._v(" "),n("li",[s._v("使用 wx.request 构造请求拿到云函数的处理结果，然后跑通整个研发流程")])])])])])}],!1,null,null,null);t.options.__file="CloudServices.md";a.default=t.exports}}]);