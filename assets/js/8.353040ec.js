(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{175:function(s,a,e){s.exports=e.p+"assets/img/vuex.8e0fdc0c.png"},204:function(s,a,e){"use strict";e.r(a);var t=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",{staticClass:"content"},[t("h2",{attrs:{id:"组件传值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组件传值","aria-hidden":"true"}},[s._v("#")]),s._v(" 组件传值")]),s._v(" "),t("h3",{attrs:{id:"父子组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#父子组件","aria-hidden":"true"}},[s._v("#")]),s._v(" 父子组件")]),s._v(" "),t("p",[s._v("单向数据流\n父组件对子组件传值：属性\n子组件修改父组件所传的值：事件 $emit")]),s._v(" "),t("h3",{attrs:{id:"兄弟组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#兄弟组件","aria-hidden":"true"}},[s._v("#")]),s._v(" 兄弟组件")]),s._v(" "),t("h2",{attrs:{id:"bus"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bus","aria-hidden":"true"}},[s._v("#")]),s._v(" Bus")]),s._v(" "),t("p",[s._v("在vue原型对象中添加Bus：创建空的vue实例bus作为传值的中介")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const Bus = new Vue()\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在vue原型对象中添加Bus")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Vue.prototype.$bus = Bus\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("$emit：触发当前实例的一些事件")]),s._v(" "),t("li",[s._v("$on：给当前实例绑定事件监听")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\x3c!-- 绑定 --\x3e\nthis.$bus.$emit('on-click', 'hello')\n\x3c!-- 监听 --\x3e\nthis.$bus.$on('on-click', mes => {\n    this.message = mes\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"vuex-基础"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vuex-基础","aria-hidden":"true"}},[s._v("#")]),s._v(" Vuex 基础")]),s._v(" "),t("p",[t("img",{attrs:{src:e(175),alt:"Vuex",title:"Vuex"}})]),s._v(" "),t("h4",{attrs:{id:"创建vuex实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建vuex实例","aria-hidden":"true"}},[s._v("#")]),s._v(" 创建vuex实例")]),s._v(" "),t("p",[t("code",[s._v("Vuex.Store")])]),s._v(" "),t("h3",{attrs:{id:"获取state的方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取state的方法","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取state的方法")]),s._v(" "),t("h4",{attrs:{id:"获取state值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取state值","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取state值")]),s._v(" "),t("p",[t("code",[s._v("this.$store.state.state名")])]),s._v(" "),t("h4",{attrs:{id:"获取模块state值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取模块state值","aria-hidden":"true"}},[s._v("#")]),s._v(" 获取模块state值")]),s._v(" "),t("p",[t("code",[s._v("this.$store.state.模块名.state名")])]),s._v(" "),t("h4",{attrs:{id:"使用vuex工具函数mapstate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用vuex工具函数mapstate","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用vuex工具函数mapstate")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import { mapState } from 'vuex'\n相当于\nimport vuex from 'vuex'\nconst mapState = vuex.mapState\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("// 返回数组\n...mapState([\n    'state名'\n])\n// 返回对象\n...mapState({\n    state名: state => state.state名\n    模块state名: state => state.模块名.state名\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("blockquote",[t("p",[t("code",[s._v("...")]),s._v(" ES6展开操作符")])]),s._v(" "),t("p",[s._v("使用space命名空间")]),s._v(" "),t("ol",[t("li",[s._v("传入模块名")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import { mapState } from 'vuex'\n...mapState(模块名,{\n    模块state名: state => state.state名\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("使用createNamespacedHelpers")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import { createNamespacedHelpers } from 'vuex'\nconst { mapState } = createNamespacedHelpers('user')\n...mapState({\n    模块state名: state => state.state名\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"getter"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getter","aria-hidden":"true"}},[s._v("#")]),s._v(" getter")]),s._v(" "),t("p",[s._v("定义")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const getters = {\n  appNameWithVersion: (state) => {\n    return `${state.appName}v2.0`\n  }\n}\n\nexport default getters\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("获取getters的方法")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\x3c!-- 方法一： --\x3e\nthis.$store.getters.appNameWithVersion\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\x3c!-- 方法二： --\x3e\nimport { mapState, mapGetters } from 'vuex'\n...mapGetters([\n    'appNameWithVersion'\n]),\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("模块内定义和获得getters的方法")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\x3c!-- 模块内定义 --\x3e\nconst getters = {\n  firstLetter: (state) => {\n    return state.userName.substr(0, 1)\n  }\n}\n\x3c!-- 调用取值 --\x3e\n...mapGetters('user',[\n    'firstLetter'\n])\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("模块内未定义命名空间不需要 "),t("code",[s._v("'user',")])])]),s._v(" "),t("p",[s._v("修改state值")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("appName: {\n    set: function (newValue) {\n        this.inputValue = newValue + 'sd'\n    },\n    get: function () {\n        return this.inputValue + 'Ella'\n    }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"mutation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mutation","aria-hidden":"true"}},[s._v("#")]),s._v(" mutation")]),s._v(" "),t("p",[s._v("配置"),t("code",[s._v("mutation")]),s._v("函数")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("SET_APP_NAME (state, params) {\n    state.appName = params\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("params：可以是参数或者对象")]),s._v(" "),t("p",[s._v("修改"),t("code",[s._v("state")]),s._v("值")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\x3c!-- 方法一 param--\x3e\nthis.$store.commit('SET_APP_NAME', 'newAppName')\n\x3c!-- 方法二 param.appName--\x3e\nthis.$store.commit({\n    type: 'SET_APP_NAME',\n    appName: 'newAppName'\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("修改未定义的"),t("code",[s._v("state")]),s._v("值")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import vue from 'vue'\nconst mutations = {\n  SET_APP_VERSION (state) {\n    vue.set(state, 'appVersion', 'v2.0')\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("调用"),t("code",[s._v("state")]),s._v("值")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("this.$store.commit('SET_APP_VERSION')\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用"),t("code",[s._v("mapMutation")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("...mapMutations([\n    'SET_APP_NAME'\n]),\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("调用"),t("code",[s._v("SET_APP_NAME")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\x3c!-- \b直接传值 --\x3e\nthis.SET_APP_NAME('newAppName')\n\n\x3c!-- 对象传值 params.app\bName --\x3e\nthis.SET_APP_NAME({\n    app\bName: 'newAppName'\n})\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("模块级别或全局的mutation都会被覆盖在全局，使用命名空间除外")]),s._v(" "),t("p",[s._v("mutation只能做同步操作")]),s._v(" "),t("h3",{attrs:{id:"actions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#actions","aria-hidden":"true"}},[s._v("#")]),s._v(" actions")]),s._v(" "),t("p",[s._v("配置"),t("code",[s._v("actions")]),s._v("函数")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("import { getAppName } from '@/api/app'\n\nconst actions = {\n  updateAppName ({ commit }) {\n    getAppName().then(res => {\n      \x3c!-- 方法一 --\x3e\n      commit('SET_APP_NAME', res.info.appName)\n\n      \x3c!-- 方法二：利用ES6解构赋值 --\x3e\n      const { info: { appName } } = res\n      commit('SET_APP_NAME', appName)\n    }).catch(err => {\n      console.log(err)\n    })\n  }\n\n  // 使用ES8 async 处理异步问题\n  async updateAppName ({ commit }) {\n    try {\n      // await等待异步函数执行\n      const { info: { appName } } = await getAppName()\n      commit('SET_APP_NAME', appName)\n    } catch (err) {\n      console.log(err)\n    }\n  }\n}\n\nexport default actions\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("p",[s._v("调用"),t("code",[s._v("actions")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("\x3c!-- 引入updateAppName --\x3e\n...mapActions([\n    'updateAppName'\n])\n\n\x3c!-- 调用updateAppName --\x3e\nthis.updateAppName()\n\n\x3c!-- 使用dispatch --\x3e\nthis.$store.dispatch('updateAppName','ee')\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("给模块添加"),t("code",[s._v("actions")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("const actions = {\n  // rootState 全局state\n  updateUserName ({ commit, state, rootState, dispatch }) {\n    // rootState.appName\n    dispatch('xxx', '')\n  },\n  xxx () {\n    //\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("动态注册模块")]),s._v(" "),t("p",[s._v("引用->")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("...mapState({\n    todoList: state => state.todo ? state.todo.todoList : []\n    // 给user添加todo\n    todoList: state => state.user.todo ? state.user.todo.todoList : []\n\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("注册->")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("registerModule () {\n    this.$store.registerModule('todo', {\n        state: {\n            todoList: [\n            '学习1',\n            '学习2'\n            ]\n        }\n    })\n    // 给user添加子模块todo\n    this.$store.registerModule(['user', 'todo'], {\n        state: {\n            todoList: [\n            '学习1',\n            '学习2'\n            ]\n        }\n    })\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h2",{attrs:{id:"vuex-进阶"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vuex-进阶","aria-hidden":"true"}},[s._v("#")]),s._v(" Vuex 进阶")]),s._v(" "),t("h3",{attrs:{id:"插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件","aria-hidden":"true"}},[s._v("#")]),s._v(" 插件")]),s._v(" "),t("p",[s._v("新增一个插件 saveInLocal.js")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export default store => {\n  // 刷新浏览器后第一次就做的操作\n  if (localStorage.state) store.replaceState(JSON.stringify(localStorage.state))\n  // subscribe：每次提交mutation之后，都会执行传入的回调函数\n  // mutation：本次提交的mutation信息\n  // state：当前模块的state状态\n  store.subscribe((mutation, state) => {\n    localStorage.state = JSON.stringify(state)\n  })\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("调用插件 index.js")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export default new Vuex.Store({\n  state,\n  getters,\n  mutations,\n  actions,\n  modules: {\n    user\n  },\n  plugins: [saveInLocal]\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"严格模式-strict-true"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#严格模式-strict-true","aria-hidden":"true"}},[s._v("#")]),s._v(" 严格模式 strict: true")]),s._v(" "),t("p",[s._v("store中的state中的值必须通过提交mmutation来修改,不能直接在组件中通过复制的方式修改")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("export default new Vuex.Store({\n  strict: true,\n  \x3c!-- 在开发环境中开启严格模式 --\x3e\n  strict: process.env.NODE_ENV === 'development',\n  state,\n  getters,\n  mutations,\n  actions,\n  modules: {\n    user\n  },\n  plugins: [saveInLocal]\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"vuex-双向绑定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vuex-双向绑定","aria-hidden":"true"}},[s._v("#")]),s._v(" vuex+双向绑定")]),s._v(" "),t("h4",{attrs:{id:"方法一："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法一：","aria-hidden":"true"}},[s._v("#")]),s._v(" 方法一：")]),s._v(" "),t("p",[s._v("\b将值绑定在value上")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<a-input :value="stateValue" @input="handleStateValueChange" />\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("...mapState({\n    // 双向绑定1\n    stateValue: state => state.stateValue\n})\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("mutation中设置SET_STATE_VALUE来修改stateValue的值")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("handleStateValueChange (val) {\n    this.SET_STATE_VALUE(val)\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h4",{attrs:{id:"方法二："}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法二：","aria-hidden":"true"}},[s._v("#")]),s._v(" 方法二：")]),s._v(" "),t("p",[s._v("使用v-model")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<a-input v-model="stateValue" />\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("使用set & get")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("stateValue: {\n    get () {\n        return this.$store.state.stateValue\n    },\n    set (value) {\n        this.SET_STATE_VALUE(value)\n    }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}],n=e(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},t,!1,null,null,null);r.options.__file="Vuex.md";a.default=r.exports}}]);