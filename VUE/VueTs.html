<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue-class-component | C.AI 的文档库</title>
    <meta name="description" content="前端工程师 C.AI 的文档库">
    <link rel="icon" href="/cyz.github.io/img/logo.ico">
    
    <link rel="preload" href="/cyz.github.io/assets/css/0.styles.25a0871d.css" as="style"><link rel="preload" href="/cyz.github.io/assets/js/app.4270ff77.js" as="script"><link rel="preload" href="/cyz.github.io/assets/js/23.be1f2b7f.js" as="script"><link rel="prefetch" href="/cyz.github.io/assets/js/10.3032db51.js"><link rel="prefetch" href="/cyz.github.io/assets/js/11.c1efc075.js"><link rel="prefetch" href="/cyz.github.io/assets/js/12.1b4cff85.js"><link rel="prefetch" href="/cyz.github.io/assets/js/13.7cdd6326.js"><link rel="prefetch" href="/cyz.github.io/assets/js/14.349ce78e.js"><link rel="prefetch" href="/cyz.github.io/assets/js/15.13a30a99.js"><link rel="prefetch" href="/cyz.github.io/assets/js/16.dfef34a4.js"><link rel="prefetch" href="/cyz.github.io/assets/js/17.ab16e4a2.js"><link rel="prefetch" href="/cyz.github.io/assets/js/18.6f396c44.js"><link rel="prefetch" href="/cyz.github.io/assets/js/19.5a53f4fb.js"><link rel="prefetch" href="/cyz.github.io/assets/js/2.c75e660e.js"><link rel="prefetch" href="/cyz.github.io/assets/js/20.9ec5b8da.js"><link rel="prefetch" href="/cyz.github.io/assets/js/21.8db1ab47.js"><link rel="prefetch" href="/cyz.github.io/assets/js/22.3155b269.js"><link rel="prefetch" href="/cyz.github.io/assets/js/24.c6e18510.js"><link rel="prefetch" href="/cyz.github.io/assets/js/25.ed066cae.js"><link rel="prefetch" href="/cyz.github.io/assets/js/26.d3f17e93.js"><link rel="prefetch" href="/cyz.github.io/assets/js/27.60ae643a.js"><link rel="prefetch" href="/cyz.github.io/assets/js/28.195b8723.js"><link rel="prefetch" href="/cyz.github.io/assets/js/29.65edfb82.js"><link rel="prefetch" href="/cyz.github.io/assets/js/3.fe4feb08.js"><link rel="prefetch" href="/cyz.github.io/assets/js/30.a18eee18.js"><link rel="prefetch" href="/cyz.github.io/assets/js/31.e984879e.js"><link rel="prefetch" href="/cyz.github.io/assets/js/32.273b9703.js"><link rel="prefetch" href="/cyz.github.io/assets/js/33.da7b8087.js"><link rel="prefetch" href="/cyz.github.io/assets/js/34.5d10f75e.js"><link rel="prefetch" href="/cyz.github.io/assets/js/35.3c605359.js"><link rel="prefetch" href="/cyz.github.io/assets/js/36.3085d796.js"><link rel="prefetch" href="/cyz.github.io/assets/js/37.12fffba4.js"><link rel="prefetch" href="/cyz.github.io/assets/js/38.005d06f0.js"><link rel="prefetch" href="/cyz.github.io/assets/js/39.b04deacf.js"><link rel="prefetch" href="/cyz.github.io/assets/js/4.6f1c2abd.js"><link rel="prefetch" href="/cyz.github.io/assets/js/40.6d7dda94.js"><link rel="prefetch" href="/cyz.github.io/assets/js/41.7a48b08e.js"><link rel="prefetch" href="/cyz.github.io/assets/js/42.477dc251.js"><link rel="prefetch" href="/cyz.github.io/assets/js/43.2fc7ac77.js"><link rel="prefetch" href="/cyz.github.io/assets/js/44.df1b2c94.js"><link rel="prefetch" href="/cyz.github.io/assets/js/45.83046a27.js"><link rel="prefetch" href="/cyz.github.io/assets/js/46.c899c1f4.js"><link rel="prefetch" href="/cyz.github.io/assets/js/5.aa4f0151.js"><link rel="prefetch" href="/cyz.github.io/assets/js/6.5ed1afcd.js"><link rel="prefetch" href="/cyz.github.io/assets/js/7.b313b001.js"><link rel="prefetch" href="/cyz.github.io/assets/js/8.e0cd4da7.js"><link rel="prefetch" href="/cyz.github.io/assets/js/9.d7f0fc9f.js">
    <link rel="stylesheet" href="/cyz.github.io/assets/css/0.styles.25a0871d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cyz.github.io/" class="home-link router-link-active"><!----> <span class="site-name">C.AI 的文档库</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/cyz.github.io/" class="nav-link">主页</a></div><div class="nav-item"><a href="/cyz.github.io/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JS相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/canvas/" class="nav-link">Canvas</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/JavaScript/" class="nav-link">Javascript语法</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/Web/" class="nav-link">重学前端</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/Interview/" class="nav-link">前端100问</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/TypeScript/" class="nav-link">TypeScript语法</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/Node/" class="nav-link">Node</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">CSS相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/CSS/" class="nav-link">常用布局</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/Vue/" class="nav-link router-link-active">基础命令</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/VueTree/" class="nav-link">技术栈</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">React相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/React/" class="nav-link">基础语法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">移动端相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/Phone/" class="nav-link">移动端适配</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/Applet/" class="nav-link">小程序</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/other/webUrl.html" class="nav-link">前端常用url</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/other/toolList.html" class="nav-link">前端工具类库</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/other/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Fishcyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/cyz.github.io/" class="nav-link">主页</a></div><div class="nav-item"><a href="/cyz.github.io/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JS相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/canvas/" class="nav-link">Canvas</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/JavaScript/" class="nav-link">Javascript语法</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/Web/" class="nav-link">重学前端</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/Interview/" class="nav-link">前端100问</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/TypeScript/" class="nav-link">TypeScript语法</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/Node/" class="nav-link">Node</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">CSS相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/CSS/" class="nav-link">常用布局</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/Vue/" class="nav-link router-link-active">基础命令</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/VueTree/" class="nav-link">技术栈</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">React相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/React/" class="nav-link">基础语法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">移动端相关</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/Phone/" class="nav-link">移动端适配</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cyz.github.io/Applet/" class="nav-link">小程序</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/other/webUrl.html" class="nav-link">前端常用url</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/other/toolList.html" class="nav-link">前端工具类库</a></li><li class="dropdown-item"><!----> <a href="/cyz.github.io/other/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Fishcyz" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/cyz.github.io/Vue/" class="sidebar-link">Vue常用命令</a></li><li><a href="/cyz.github.io/Vue/VueConfig.html" class="sidebar-link">vue.config.js 的配置</a></li><li><a href="/cyz.github.io/Vue/VueTs.html" class="active sidebar-link">vue组件的TS语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cyz.github.io/Vue/VueTs.html#vue-class-component" class="sidebar-link">vue-class-component</a></li><li class="sidebar-sub-header"><a href="/cyz.github.io/Vue/VueTs.html#添加全局工具" class="sidebar-link">添加全局工具</a></li><li class="sidebar-sub-header"><a href="/cyz.github.io/Vue/VueTs.html#axios-使用与封装" class="sidebar-link">Axios 使用与封装</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><p>从 vue2.5 之后，vue 对 ts 有更好的支持。根据官方文档，vue 结合 typescript ，有两种书写方式</p> <ul><li>Vue.extend</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>import Vue from 'vue'

const Component = Vue.extend({
  // type inference enabled
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>会出现丢失代码提示、类型检查、编译报错等问题</p></blockquote> <ul><li>vue-class-component</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>import { Component, Vue, Prop } from 'vue-property-decorator'

@Component
export default class Test extends Vue {
  @Prop({ type: Object })
  private test: { value: string }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="vue-class-component"><a href="#vue-class-component" aria-hidden="true" class="header-anchor">#</a> vue-class-component</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>@Component
export default class extends Vue{}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>回到<code>src/components/HelloWorld.vue</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;hello&quot;&gt;
    &lt;h1&gt;{{ msg }}&lt;/h1&gt;
    &lt;!-- 省略 --&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot;&gt;
import { Component, Prop, Vue } from 'vue-property-decorator';

@Component
export default class HelloWorld extends Vue {
  @Prop() private msg!: string;
}
&lt;/script&gt;

&lt;!-- Add &quot;scoped&quot; attribute to limit CSS to this component only --&gt;
&lt;style scoped&gt;&lt;/style&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><code>vue-property-decorator</code>这个官方支持的库里，提供了函数 <strong>装饰器（修饰符）</strong> 语法</p> <ol><li>函数修饰符 <code>@</code></li></ol> <p>“@”，与其说是修饰函数倒不如说是引用、调用它修饰的函数。</p> <p>或者用句大白话描述：@: &quot;下面的被我包围了。&quot;</p> <p>举个栗子，下面的一段代码，里面两个函数，没有被调用，也会有输出结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>test(f){
  console.log(&quot;before ...&quot;);
  f()
  console.log(&quot;after ...&quot;);
}

@test
func(){
	console.log(&quot;func was called&quot;);
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>直接运行，输出结果：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>before ...
func was called
after ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>上面代码可以看出来:</p> <ul><li>只定义了两个函数：<code>test</code>和<code>func</code>，没有调用它们。</li> <li>如果没有“<code>@test</code>”，运行应该是没有任何输出的。</li></ul> <p>但是，解释器读到函数修饰符“@”的时候，后面步骤会是这样：</p> <ul><li>去调用<code>test</code>函数，<code>test</code>函数的入口参数就是那个叫“<code>func</code>”的函数；</li> <li><code>test</code>函数被执行，入口参数的（也就是<code>func</code>函数）会被调用（执行）；</li></ul> <p>换言之，修饰符带的那个函数的入口参数，就是下面的那个整个的函数。有点儿类似<code>JavaScript</code>里面的
<code>function a (function () { ... })</code>;</p> <ol start="2"><li><code>vue-property-decorator</code> 和 <code>vuex-class</code> 提供的装饰器</li></ol> <p><code>vue-property-decorator</code>的装饰器：</p> <ul><li><a href="https://github.com/kaorun343/vue-property-decorator#Prop" target="_blank" rel="noopener noreferrer">@Prop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/kaorun343/vue-property-decorator#PropSync" target="_blank" rel="noopener noreferrer">@PropSync<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/kaorun343/vue-property-decorator#Provide" target="_blank" rel="noopener noreferrer">@Provide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/kaorun343/vue-property-decorator#Model" target="_blank" rel="noopener noreferrer">@Model<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/kaorun343/vue-property-decorator#Watch" target="_blank" rel="noopener noreferrer">@Watch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/kaorun343/vue-property-decorator#Provide" target="_blank" rel="noopener noreferrer">@Inject<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/kaorun343/vue-property-decorator#Provide" target="_blank" rel="noopener noreferrer">@Provide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/kaorun343/vue-property-decorator#Emit" target="_blank" rel="noopener noreferrer">@Emit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>@Component(provided by vue-class-component)</li> <li>Mixins(the helper function named mixins provided by vue-class-component)</li></ul> <p><code>vuex-class</code>的装饰器：</p> <ul><li>@State</li> <li>@Getter</li> <li>@Action</li> <li>@Mutation</li></ul> <p>我们拿原始Vue组件模版来看：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import {componentA,componentB} from '@/components';

export default {
	components: { componentA, componentB},
	props: {
    propA: { type: Number },
    propB: { default: 'default value' },
    propC: { type: [String, Boolean] },
  }
  // 组件数据
  data () {
    return {
      message: 'Hello'
    }
  },
  // 计算属性
  computed: {
    reversedMessage () {
      return this.message.split('').reverse().join('')
    }
    // Vuex数据
    step() {
    	return this.$store.state.count
    }
  },
  methods: {
    changeMessage () {
      this.message = &quot;Good bye&quot;
    },
    getName() {
    	let name = this.$store.getters['person/name']
    	return name
    }
  },
  // 生命周期
  created () { },
  mounted () { },
  updated () { },
  destroyed () { }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>以上模版替换成修饰符写法则是：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import { Component, Vue, Prop } from 'vue-property-decorator';
import { State, Getter } from 'vuex-class';
import { count, name } from '@/person'
import { componentA, componentB } from '@/components';

@Component({
  components:{ componentA, componentB},
})
export default class HelloWorld extends Vue{
	@Prop(Number) readonly propA!: number | undefined
  @Prop({ default: 'default value' }) readonly propB!: string
  @Prop([String, Boolean]) readonly propC!: string | boolean | undefined
  
  // 原data
  message = 'Hello'
  
  // 计算属性
	private get reversedMessage (): string[] {
  	return this.message.split('').reverse().join('')
  }
  // Vuex 数据
  @State((state: IRootState) =&gt; state . booking. currentStep) step!: number
	@Getter( 'person/name') name!: name
  
  // method
  public changeMessage (): void {
    this.message = 'Good bye'
  },
  public getName(): string {
    let storeName = name
    return storeName
  }
	// 生命周期
  private created ()：void { },
  private mounted ()：void { },
  private updated ()：void { },
  private destroyed ()：void { }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>我们在生命周期 列表那都添加<code>private XXXX</code>方法，因为这不应该公开给其他组件。</p> <p>而不对<code>method</code>做私有约束的原因是，可能会用到<code>@Emit</code>来向父组件传递信息。</p> <h2 id="添加全局工具"><a href="#添加全局工具" aria-hidden="true" class="header-anchor">#</a> 添加全局工具</h2> <p>引入全局模块，需要改<code>main.ts</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import Vue from 'vue';
import App from './App.vue';
import router from './router';
import store from './store';

Vue.config.productionTip = false;

new Vue({
  router,
  store,
  render: (h) =&gt; h(App),
}).$mount('#app');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>npm i vue-i18n</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import Vue from 'vue';
import App from './App.vue';
import router from './router';
import store from './store';
// 新模块
import i18n from './i18n';

Vue.config.productionTip = false;

new Vue({
  router, 
  store, 
  i18n, // 新模块
  render: (h) =&gt; h(App),
}).$mount('#app');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>修改<code>src/vue-shim.d.ts</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 声明全局方法
declare module 'vue/types/vue' {
  interface Vue {
    readonly $i18n: VueI18Next;
    $t: TranslationFunction;
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>之后使用<code>this.$i18n()</code>的话就不会报错了。</p> <h2 id="axios-使用与封装"><a href="#axios-使用与封装" aria-hidden="true" class="header-anchor">#</a> Axios 使用与封装</h2> <p>安装<code>vue-axios</code> <code>$ npm i axios vue-axios</code></p> <p><code>main.ts</code>添加：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import Vue from 'vue'
import axios from 'axios'
import VueAxios from 'vue-axios'

Vue.use(VueAxios, axios)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>然后在组件内使用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Vue.axios.get(api).then((response) =&gt; {
  console.log(response.data)
})

this.axios.get(api).then((response) =&gt; {
  console.log(response.data)
})

this.$http.get(api).then((response) =&gt; {
  console.log(response.data)
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ol><li>新建文件<code>request.ts</code></li></ol></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/cyz.github.io/Vue/VueConfig.html" class="prev">
          vue.config.js 的配置
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/cyz.github.io/assets/js/app.4270ff77.js" defer></script><script src="/cyz.github.io/assets/js/23.be1f2b7f.js" defer></script>
  </body>
</html>
